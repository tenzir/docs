# Google Cloud Logging Improvements

This release improves the integration with Google Cloud Logging.

Download the release on [GitHub](https://github.com/tenzir/tenzir/releases/tag/v5.1.2).

### Changes

[Section titled “Changes”](#changes)

#### Split out `name` option and use metadata server when unset

[Section titled “Split out name option and use metadata server when unset”](#split-out-name-option-and-use-metadata-server-when-unset)

We split the `name` option of `to_google_cloud_logging`, no longer requiring user to construct the ID manually.

By [@raxyte](https://github.com/raxyte) in [#5160](https://github.com/tenzir/tenzir/pull/5160).

### Bug Fixes

[Section titled “Bug Fixes”](#bug-fixes)

#### Delay catalog lookups until catalog is ready

[Section titled “Delay catalog lookups until catalog is ready”](#delay-catalog-lookups-until-catalog-is-ready)

The `export`, `metrics`, `diagnostics` and `partitions` operators returned an empty result when used before the node had successfully loaded its persisted data. They now wait correctly.

By [@dominiklohmann](https://github.com/dominiklohmann) in [#5156](https://github.com/tenzir/tenzir/pull/5156).

#### Always shut down the pipeline manager first

[Section titled “Always shut down the pipeline manager first”](#always-shut-down-the-pipeline-manager-first)

We fixed a very rare bug that on shutdown could mark running pipelines as stopped, completed, or failed, causing the pipelines not to restart alongside the node.

By [@dominiklohmann](https://github.com/dominiklohmann) in [#5163](https://github.com/tenzir/tenzir/pull/5163).

#### Do not refuse startup when `pid.lock` is invalid

[Section titled “Do not refuse startup when pid.lock is invalid”](#do-not-refuse-startup-when-pidlock-is-invalid)

The node no longer refuses to start when its last shutdown happened in the brief period on startup after its PID file was created and before it was flushed.

By [@dominiklohmann](https://github.com/dominiklohmann) in [#5164](https://github.com/tenzir/tenzir/pull/5164).

#### Split out `name` option and use metadata server when unset

[Section titled “Split out name option and use metadata server when unset”](#split-out-name-option-and-use-metadata-server-when-unset-1)

The `to_google_cloud_logging` operator is now available in both Docker and static builds. The operator had earlier been missing due to a configuration issue.

By [@raxyte](https://github.com/raxyte) in [#5160](https://github.com/tenzir/tenzir/pull/5160).