# Performance Improvements

This release focuses on improving performance and memory usage. Pipelines are now faster, especially when using if conditions or parsing highly heterogeneous events. Memory usage has also been substantially reduced.

Download the release on [GitHub](https://github.com/tenzir/tenzir/releases/tag/v5.18.0).

### Changes

[Section titled “Changes”](#changes)

#### Periodically release unused memory in server mode

[Section titled “Periodically release unused memory in server mode”](#periodically-release-unused-memory-in-server-mode)

Tenzir Node now calls malloc\_trim every 10 minutes to release unused memory back to the operating system, reducing memory fragmentation in long-running instances.

By [@lava](https://github.com/lava) in [#5524](https://github.com/tenzir/tenzir/pull/5524).

#### Improved `export` memory management

[Section titled “Improved export memory management”](#improved-export-memory-management)

The database partitions opened by the `export` operator previously read and forwarded their entire contents to `export` without waiting for the operator to forward them. This circumvented the usual backpressure mechanism and could lead to unexpectedly high memory usage. Now, the backpressure is propagated to the underlying storage layer.

By [@jachris](https://github.com/jachris) in [#5520](https://github.com/tenzir/tenzir/pull/5520).

#### Improved pipeline execution

[Section titled “Improved pipeline execution”](#improved-pipeline-execution)

We fine-tuned the scheduling logic responsible for the execution of pipelines. In particular, certain pipelines that invoke parsing functions now take significantly less memory to run. Furthermore, `if` runs much faster in situations with many small batches, preventing pipeline congestion and therefore also lower memory usage.

By [@jachris](https://github.com/jachris) in [#5519](https://github.com/tenzir/tenzir/pull/5519), [#5525](https://github.com/tenzir/tenzir/pull/5525).

### Bug Fixes

[Section titled “Bug Fixes”](#bug-fixes)

#### Fixed record sorting

[Section titled “Fixed record sorting”](#fixed-record-sorting)

Calling `sort` on records may have caused a crash for more involved objects. This no longer happens.

By [@mavam](https://github.com/mavam) in [#5526](https://github.com/tenzir/tenzir/pull/5526).