---
export interface Props {
  imageSrc?: string;
  activeSection?: "tutorials" | "guides" | "explanations" | "reference" | null;
}

const { imageSrc = "/docs-structure.svg", activeSection = null } = Astro.props;

// Define which sections should be clickable based on the active section
const getClickableStatus = (section: string) => {
  return activeSection !== section;
};

// Get the appropriate href for each section
const getHref = (section: string) => {
  if (activeSection === section) return undefined;
  return `/${section}/`;
};
---

<div class="interactive-diagram-container">
  <!-- The SVG image -->
  <img src={imageSrc} alt="Documentation structure" class="diagram-image inline-svg" />

  <!-- Clickable overlay areas -->
  <div class="overlay-container">
    <!-- Tutorials (top-left) -->
    {
      getClickableStatus("tutorials") ? (
        <a
          href={getHref("tutorials")}
          class="overlay-area tutorials"
          aria-label="Go to Tutorials"
        >
          <div class="overlay-content" />
        </a>
      ) : (
        <div class="overlay-area tutorials inactive">
          <div class="overlay-content" />
        </div>
      )
    }

    <!-- Guides (top-right) -->
    {
      getClickableStatus("guides") ? (
        <a
          href={getHref("guides")}
          class="overlay-area guides"
          aria-label="Go to Guides"
        >
          <div class="overlay-content" />
        </a>
      ) : (
        <div class="overlay-area guides inactive">
          <div class="overlay-content" />
        </div>
      )
    }

    <!-- Explanations (bottom-left) -->
    {
      getClickableStatus("explanations") ? (
        <a
          href={getHref("explanations")}
          class="overlay-area explanations"
          aria-label="Go to Explanations"
        >
          <div class="overlay-content" />
        </a>
      ) : (
        <div class="overlay-area explanations inactive">
          <div class="overlay-content" />
        </div>
      )
    }

    <!-- Reference (bottom-right) -->
    {
      getClickableStatus("reference") ? (
        <a
          href={getHref("reference")}
          class="overlay-area reference"
          aria-label="Go to Reference"
        >
          <div class="overlay-content" />
        </a>
      ) : (
        <div class="overlay-area reference inactive">
          <div class="overlay-content" />
        </div>
      )
    }
  </div>
</div>
