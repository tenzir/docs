---
export interface Props {
  title: string;
  description?: string;
  variant?: 'default' | 'primary' | 'success' | 'warning' | 'error';
  icon?: string;
  href?: string;
}

const { title, description, variant = 'default', icon, href } = Astro.props;

// Map variants to Tenzir design system colors
const variantStyles = {
  default: 'tnz-border-neutral-300 tnz-bg-neutral-50',
  primary: 'tnz-border-primary-300 tnz-bg-primary-50',
  success: 'tnz-border-green-300 tnz-bg-green-200',
  warning: 'tnz-border-yellow-300 tnz-bg-yellow-200',
  error: 'tnz-border-red-300 tnz-bg-red-100'
};

const variantIconColors = {
  default: 'tnz-text-neutral-600',
  primary: 'tnz-text-primary-600',
  success: 'tnz-text-green-600',
  warning: 'tnz-text-yellow-600',
  error: 'tnz-text-red-600'
};

const Component = href ? 'a' : 'div';
const isExternal = href && (href.startsWith('http://') || href.startsWith('https://'));
---

<Component 
  class={`example-card ${variantStyles[variant]} ${href ? 'example-card--link' : ''}`}
  href={href}
  {...(isExternal && { target: '_blank', rel: 'noopener noreferrer' })}
>
  <div class="example-card__header">
    {icon && (
      <div class={`example-card__icon ${variantIconColors[variant]}`}>
        <span class="tnz-text-2xl">{icon}</span>
      </div>
    )}
    <h3 class="example-card__title">{title}</h3>
    {href && (
      <span class="example-card__arrow" aria-hidden="true">
        â†’
      </span>
    )}
  </div>
  
  {description && (
    <p class="example-card__description">
      {description}
    </p>
  )}
  
  <div class="example-card__content">
    <slot />
  </div>
</Component>

<style>
  /* Base card styles using Tenzir design tokens */
  .example-card {
    display: block;
    padding: var(--tnz-p-6, 1.5rem);
    border: 1px solid;
    border-radius: var(--tnz-radius);
    transition: all 0.2s ease;
    position: relative;
    overflow: hidden;
  }
  
  /* Link variant styles */
  .example-card--link {
    text-decoration: none;
    color: inherit;
    cursor: pointer;
  }
  
  .example-card--link:hover {
    transform: translateY(-2px);
    box-shadow: var(--tnz-shadow-m);
  }
  
  .example-card--link:hover .example-card__arrow {
    opacity: 1;
    transform: translateX(0);
  }
  
  /* Header layout */
  .example-card__header {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 1rem;
  }
  
  /* Icon styling */
  .example-card__icon {
    flex-shrink: 0;
    width: 2.5rem;
    height: 2.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--tnz-radius-md);
    background-color: var(--sl-color-bg);
  }
  
  /* Title styling */
  .example-card__title {
    margin: 0;
    font-size: var(--tnz-text-lg);
    font-weight: 600;
    font-family: var(--tnz-font-sans);
    color: var(--sl-color-white);
    flex: 1;
  }
  
  /* Arrow indicator */
  .example-card__arrow {
    font-size: var(--tnz-text-xl);
    color: var(--sl-color-text-accent);
    opacity: 0;
    transform: translateX(-0.5rem);
    transition: all 0.2s ease;
  }
  
  /* Description text */
  .example-card__description {
    margin: 0 0 1rem 0;
    font-size: var(--tnz-text-sm);
    color: var(--sl-color-gray-2);
    line-height: var(--sl-line-height-body);
  }
  
  /* Content slot */
  .example-card__content {
    font-size: var(--tnz-text-sm);
  }
  
  /* Ensure proper styling in both light and dark modes */
  :global([data-theme="light"]) .example-card {
    background-color: var(--sl-color-bg);
  }
  
  :global([data-theme="light"]) .example-card__icon {
    background-color: var(--sl-color-gray-7);
  }
  
  /* Responsive adjustments */
  @media (max-width: 768px) {
    .example-card {
      padding: 1rem;
    }
    
    .example-card__title {
      font-size: var(--tnz-text-base);
    }
  }
</style>

<!-- Usage Examples:

Basic card:
<ExampleCard title="Basic Card">
  <p>This is a basic card with default styling.</p>
</ExampleCard>

Primary variant with icon:
<ExampleCard 
  title="Primary Card" 
  description="This demonstrates the primary variant"
  variant="primary"
  icon="ðŸš€"
>
  <code>variant="primary"</code>
</ExampleCard>

Success card with link:
<ExampleCard 
  title="Success Card" 
  description="Click to learn more"
  variant="success"
  icon="âœ…"
  href="/docs/success"
>
  <p>This card is clickable!</p>
</ExampleCard>

Warning card:
<ExampleCard 
  title="Warning" 
  description="Important information"
  variant="warning"
  icon="âš ï¸"
>
  <ul>
    <li>Uses Tenzir design tokens</li>
    <li>Responsive design</li>
    <li>Dark mode support</li>
  </ul>
</ExampleCard>

Error card with external link:
<ExampleCard 
  title="Error Example" 
  variant="error"
  icon="âŒ"
  href="https://example.com"
>
  <p>External links open in new tab</p>
</ExampleCard>
-->