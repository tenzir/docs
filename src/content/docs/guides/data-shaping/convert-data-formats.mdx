---
title: Convert data formats
---

Data comes in many formats. Converting between formats is essential for
integration, export, and interoperability. This guide shows you how to transform
data between JSON, CSV, YAML, and other common formats using TQL's print
functions.

## Print to JSON

JSON is the most common data exchange format. Use
[`print_json()`](/reference/functions/print_json) to convert any data to JSON
strings:

```tql
from {
  user: {
    name: "Alice",
    age: 30,
    roles: ["admin", "user"],
    email: null,
    metadata: {}
  }
}
set json_string = user.print_json()
set json_stripped = user.print_json(strip=true)
```

```tql
{
  user: {
    name: "Alice",
    age: 30,
    roles: ["admin", "user"],
    email: null,
    metadata: {}
  },
  json_string: "{\n  \"name\": \"Alice\",\n  \"age\": 30,\n  \"roles\": [\n    \"admin\",\n    \"user\"\n  ],\n  \"email\": null,\n  \"metadata\": {}\n}",
  json_stripped: "{\n  \"name\": \"Alice\",\n  \"age\": 30,\n  \"roles\": [\n    \"admin\",\n    \"user\"\n  ]\n}"
}
```

### Print newline-delimited JSON

For streaming data, use [`print_ndjson()`](/reference/functions/print_ndjson):

```tql
from {
  events: [
    {type: "login", user: "alice"},
    {type: "view", user: "bob"},
    {type: "logout", user: "alice"}
  ]
}
set ndjson = events.print_ndjson()
```

```tql
{
  events: [...],
  ndjson: "{\"type\":\"login\",\"user\":\"alice\"}\n{\"type\":\"view\",\"user\":\"bob\"}\n{\"type\":\"logout\",\"user\":\"alice\"}"
}
```

## Print to CSV

Convert tabular data to CSV with [`print_csv()`](/reference/functions/print_csv):

```tql
from {
  users: [
    {name: "Alice", age: 30, city: "NYC"},
    {name: "Bob", age: 25, city: "SF"},
    {name: "Charlie", age: 35, city: "LA"}
  ]
}
set csv_data = users.print_csv()
set custom_csv = users.print_csv(sep=";", no_header=true)
```

```tql
{
  users: [...],
  csv_data: "name,age,city\nAlice,30,NYC\nBob,25,SF\nCharlie,35,LA",
  custom_csv: "Alice;30;NYC\nBob;25;SF\nCharlie;35;LA"
}
```

### Handle special characters

CSV printing automatically handles quoting and escaping:

```tql
from {
  data: [
    {text: "Hello, world", value: 123},
    {text: "Line 1\nLine 2", value: 456},
    {text: "Quote: \"test\"", value: 789}
  ]
}
set csv = data.print_csv()
```

```tql
{
  data: [...],
  csv: "text,value\n\"Hello, world\",123\n\"Line 1\nLine 2\",456\n\"Quote: \"\"test\"\"\",789"
}
```

## Print to TSV and SSV

For tab-separated and space-separated values, use
[`print_tsv()`](/reference/functions/print_tsv) and
[`print_ssv()`](/reference/functions/print_ssv):

```tql
from {
  record: {id: 1, name: "Alice Smith", status: "active"}
}
set tsv = record.print_tsv()
set ssv = record.print_ssv()
```

```tql
{
  record: {id: 1, name: "Alice Smith", status: "active"},
  tsv: "1\tAlice Smith\tactive",
  ssv: "1 \"Alice Smith\" active"
}
```

## Print to custom-separated values

Use [`print_xsv()`](/reference/functions/print_xsv) for custom separators:

```tql
from {
  item: {sku: "A001", desc: "Widget", price: 9.99}
}
set pipe_separated = item.print_xsv(sep="|")
set colon_separated = item.print_xsv(sep=" :: ")
```

```tql
{
  item: {sku: "A001", desc: "Widget", price: 9.99},
  pipe_separated: "A001|Widget|9.99",
  colon_separated: "A001 :: Widget :: 9.99"
}
```

## Print to YAML

Convert data to YAML format with
[`print_yaml()`](/reference/functions/print_yaml):

```tql
from {
  config: {
    server: {
      host: "localhost",
      port: 8080,
      ssl: true
    },
    features: ["auth", "api", "websocket"]
  }
}
set yaml_string = config.print_yaml()
```

```tql
{
  config: {...},
  yaml_string: "server:\n  host: localhost\n  port: 8080\n  ssl: true\nfeatures:\n  - auth\n  - api\n  - websocket"
}
```

## Print key-value pairs

Convert records to key-value format with
[`print_kv()`](/reference/functions/print_kv):

```tql
from {
  event: {
    timestamp: "2024-01-15T10:30:00",
    level: "ERROR",
    message: "Connection failed",
    code: 500
  }
}
set kv_default = event.print_kv()
set kv_custom = event.print_kv(value_separator=": ", field_separator=" | ")
```

```tql
{
  event: {...},
  kv_default: "timestamp=2024-01-15T10:30:00 level=ERROR message=\"Connection failed\" code=500",
  kv_custom: "timestamp: 2024-01-15T10:30:00 | level: ERROR | message: Connection failed | code: 500"
}
```

## Print security formats

### CEF (Common Event Format)

Print security events in CEF format with
[`print_cef()`](/reference/functions/print_cef):

```tql
from {
  extension: {
    src: "10.0.0.1",
    dst: "192.168.1.1",
    spt: 12345,
    dpt: 22
  }
}
set cef_string = extension.print_cef(
  cef_version="0",
  device_vendor="Security Corp",
  device_product="Firewall",
  device_version="1.0",
  signature_id="100",
  name="Port Scan Detected",
  severity="7"
)
```

```tql
{
  extension: {src: "10.0.0.1", dst: "192.168.1.1", spt: 12345, dpt: 22},
  cef_string: "CEF:0|Security Corp|Firewall|1.0|100|Port Scan Detected|7|src=10.0.0.1 dst=192.168.1.1 spt=12345 dpt=22"
}
```

### LEEF (Log Event Extended Format)

Print in IBM QRadar's LEEF format with [`print_leef()`](/reference/functions/print_leef):

```tql
from {
  attributes: {
    srcIP: "10.0.0.5",
    dstIP: "192.168.1.10",
    action: "BLOCK"
  }
}
set leef_string = attributes.print_leef(
  vendor="Security Corp",
  product_name="IDS",
  product_version="2.0",
  event_class_id="200"
)
```

```tql
{
  attributes: {srcIP: "10.0.0.5", dstIP: "192.168.1.10", action: "BLOCK"},
  leef_string: "LEEF:2.0|Security Corp|IDS|2.0|200|srcIP=10.0.0.5|dstIP=192.168.1.10|action=BLOCK"
}
```

## Convert between formats

Chain parsing and printing to convert between formats:

```tql
from {
  json_data: "{\"name\":\"Alice\",\"age\":30,\"city\":\"NYC\"}"
}
// JSON to CSV
set parsed = json_data.parse_json()
set as_csv = [parsed].print_csv()

// JSON to YAML
set as_yaml = parsed.print_yaml()

// JSON to Key-Value
set as_kv = parsed.print_kv()
```

```tql
{
  json_data: "{\"name\":\"Alice\",\"age\":30,\"city\":\"NYC\"}",
  parsed: {name: "Alice", age: 30, city: "NYC"},
  as_csv: "name,age,city\nAlice,30,NYC",
  as_yaml: "name: Alice\nage: 30\ncity: NYC",
  as_kv: "name=Alice age=30 city=NYC"
}
```

## Practical examples

### Export user data

```tql
from {
  users: [
    {id: 1, name: "Alice", email: "alice@example.com", joined: 2024-01-01},
    {id: 2, name: "Bob", email: "bob@example.com", joined: 2024-01-15},
    {id: 3, name: "Charlie", email: "charlie@example.com", joined: 2024-02-01}
  ]
}
// Export as JSON
set export_json = users.print_json()
set export_ndjson = users.print_ndjson()

// Export individual records as CSV
set first_user_csv = users.first().print_csv()
```

```tql
{
  users: [...],
  export_json: "[{\"id\":1,\"name\":\"Alice\",\"email\":\"alice@example.com\",\"joined\":\"2024-01-01T00:00:00.000000\"},{\"id\":2,\"name\":\"Bob\",\"email\":\"bob@example.com\",\"joined\":\"2024-01-15T00:00:00.000000\"},{\"id\":3,\"name\":\"Charlie\",\"email\":\"charlie@example.com\",\"joined\":\"2024-02-01T00:00:00.000000\"}]",
  export_ndjson: "{\"id\":1,\"name\":\"Alice\",\"email\":\"alice@example.com\",\"joined\":\"2024-01-01T00:00:00.000000\"}\n{\"id\":2,\"name\":\"Bob\",\"email\":\"bob@example.com\",\"joined\":\"2024-01-15T00:00:00.000000\"}\n{\"id\":3,\"name\":\"Charlie\",\"email\":\"charlie@example.com\",\"joined\":\"2024-02-01T00:00:00.000000\"}",
  first_user_csv: "1,Alice,alice@example.com,2024-01-01T00:00:00.000000"
}
```

### Export event stream as CSV

```tql
from {id: 1, name: "Alice", email: "alice@example.com"},
     {id: 2, name: "Bob", email: "bob@example.com"},
     {id: 3, name: "Charlie", email: "charlie@example.com"}
write_csv
read_lines
```

```tql
{line: "id,name,email"}
{line: "1,Alice,alice@example.com"}
{line: "2,Bob,bob@example.com"}
{line: "3,Charlie,charlie@example.com"}
```

### Create configuration files

```tql
from {
  settings: {
    app_name: "MyApp",
    version: "1.0.0",
    database: {
      host: "db.example.com",
      port: 5432,
      name: "myapp_db"
    },
    features: {
      auth: true,
      api: true,
      websocket: false
    }
  }
}
// Generate different config formats
set json_config = settings.print_json(indent=2)
set yaml_config = settings.print_yaml()
set env_vars = f"APP_NAME={settings.app_name}\nAPP_VERSION={settings.version}\nDB_HOST={settings.database.host}\nDB_PORT={settings.database.port}"
```

```tql
{
  settings: {...},
  json_config: "{\n  \"app_name\": \"MyApp\",\n  \"version\": \"1.0.0\",\n  ...\n}",
  yaml_config: "app_name: MyApp\nversion: 1.0.0\ndatabase:\n  host: db.example.com\n  port: 5432\n  name: myapp_db\nfeatures:\n  auth: true\n  api: true\n  websocket: false",
  env_vars: "APP_NAME=MyApp\nAPP_VERSION=1.0.0\nDB_HOST=db.example.com\nDB_PORT=5432"
}
```

### Format logs for different systems

```tql
from {
  log_event: {
    timestamp: 2024-01-15T10:30:45,
    level: "ERROR",
    service: "auth",
    message: "Login failed",
    user: "alice@example.com",
    ip: "192.168.1.100"
  }
}
// Syslog format
set syslog = f"<131>{log_event.timestamp.format_time()} {log_event.service}: {log_event.level} - {log_event.message}"

// JSON for modern logging
set json_log = log_event.print_json()

// Key-value for traditional systems
set kv_log = log_event.print_kv()

// CSV for analysis
set csv_row = [log_event].print_csv(no_header=true)
```

```tql
{
  log_event: {...},
  syslog: "<131>2024-01-15T10:30:45.000000 auth: ERROR - Login failed",
  json_log: "{\"timestamp\":\"2024-01-15T10:30:45.000000\",\"level\":\"ERROR\",\"service\":\"auth\",\"message\":\"Login failed\",\"user\":\"alice@example.com\",\"ip\":\"192.168.1.100\"}",
  kv_log: "timestamp=2024-01-15T10:30:45.000000 level=ERROR service=auth message=\"Login failed\" user=alice@example.com ip=192.168.1.100",
  csv_row: "2024-01-15T10:30:45.000000,ERROR,auth,Login failed,alice@example.com,192.168.1.100"
}
```

## Best practices

1. **Choose appropriate formats**:
   - JSON for APIs and modern systems
   - CSV for spreadsheets and analysis
   - YAML for configuration files
   - Key-value for logging systems

2. **Handle special characters**: Be aware of how each format handles quotes,
   newlines, and separators

3. **Consider file size**: JSON is verbose, CSV is compact

4. **Preserve data types**: Some formats (CSV) lose type information

5. **Use proper escaping**: Let print functions handle escaping automatically

## Related guides

- [Extract structured data from
  text](/guides/data-shaping/extract-structured-data-from-text) - Parse
  different formats
- [Transform collections](/guides/data-shaping/transform-collections) - Prepare
  data for printing
- [Manipulate strings](/guides/data-shaping/manipulate-strings) - Work with printed output
