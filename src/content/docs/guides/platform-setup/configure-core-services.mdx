---
title: Configure core services
---

The Tenzir Platform usually runs as a set of containers in a docker compose
stack. Our [example files](https://github.com/tenzir/platform/tree/main/examples)
pick up certain configuration parameters from environment variables.

To configure the platform, create a file named `.env` in the same directory
as the `docker-compose.yaml` file with your Tenzir Platform stack and set
the environment variables described below.

## Admin Rules

The Tenzir Platform distinguishes between regular and admin users.
Admin users have permission to create new workspaces and to view, edit and
delete all existing workspaces.

At the moment, only admins can create shared workspaces by creating a new
workspace and editing the access rules.

To configure who is an administrator, you provide a list of
authentication rules. Every user matching any of the provided rules
is considered to be an administrator of this platform instance, and will
be allowed to use the `tenzir-platform admin` CLI commands.

Use the `tenzir-platform tools print-auth-rule` CLI command to
get valid rules to insert here.

```sh
# Everybody is an admin. Suitable for deployments with just a few users who
# fully trust each other.
TENZIR_PLATFORM_ADMIN_RULES=[{"auth_fn":"auth_allow_all"}]

# The two users with the ids `google-oauth2:12345678901` and `google-oauth2:12345678902`
# are the admins of this Tenzir Platform instance.
TENZIR_PLATFORM_ADMIN_RULES=[{"auth_fn":"auth_user","user_id":"google-oauth2:12345678901"}, {"auth_fn":"auth_user","user_id":"google-oauth2:12345678902"}]
```

## Random Seeds

The Tenzir Platform requires some random strings to perform some encryption
functions. You should generate these from a secure random number generator and
use unique values for each instance of the Tenzir Platform.

```
# An arbitrary random string used as key to encrypt frontend cookies.
# Generate with `openssl rand -hex 32`.
TENZIR_PLATFORM_INTERNAL_AUTH_SECRET=

# An arbitrary random string used to generate user keys.
# Generate with `openssl rand 32 | base64`.
TENZIR_PLATFORM_INTERNAL_TENANT_TOKEN_ENCRYPTION_KEY=

# An arbitrary random string used by the app to access restricted API endpoints.
# Generate with `openssl rand -hex 32`.
TENZIR_PLATFORM_INTERNAL_APP_API_KEY=
```
