---
title: context::update
category: Contexts
example: 'context::update "ctx", key=x, value=y'
---

import Op from '@components/see-also/Op.astro';
import Guide from '@components/see-also/Guide.astro';
import Explanation from '@components/see-also/Explanation.astro';

Updates a context with new data.

```tql
context::update name:string, key=any,
               [value=any, create_timeout=duration,
                write_timeout=duration, read_timeout=duration]
```

## Description

The `context::update` operator adds new data to a specified context.

Use the `key` argument to specify the field in the input that should be
associated with the context. The [`context::enrich`](/reference/operators/context/enrich) operator uses
this key to access the context. For contexts that support assigning a value with
a given key, you can provide an expression to customize what's being associated
with the given key.

The three arguments `create_timeout`, `write_timeout`, and `read_timeout` only
work with lookup tables and set the respective timeouts per table entry.

### `name: string`

The name of the context to update.

### `key = any`

The field that represents the enrichment key in the data.

### `value = any (optional)`

The field that represents the enrichment value to associate with `key`.

Defaults to `this`.

### `create_timeout = duration (optional)`

Expires a context entry after a given duration since entry creation.

### `write_timeout = duration (optional)`

Expires a context entry after a given duration since the last update time. Every
Every call to `context::update` resets the timeout for the respective key.

### `read_timeout = duration (optional)`

Expires a context entry after a given duration since the last access time.
Every call to `context::enrich` resets the timeout for the respective key.

## Examples

### Populate a lookup table with data

Create a lookup table:

```tql
context::create_lookup_table "ctx"
```

Add data to the lookup table via `context::update`:

```tql
from {x:1, y:"a"},
     {x:2, y:"b"}
context::update "ctx", key=x, value=y
```

Retrieve the lookup table contents:

```tql
context::inspect "ctx"
```

```tql
{key: 2, value: "b"}
{key: 1, value: "a"}
```

### Use a custom value as lookup table

```tql
from {x:1},
     {x:2}
context::update "ctx", key=x, value=x*x
```

```tql
{key: 2, value: 4}
{key: 1, value: 1}
```

## See Also

- <Op>context::create_bloom_filter</Op>
- <Op>context::create_geoip</Op>
- <Op>context::create_lookup_table</Op>
- <Op>context::enrich</Op>
- <Op>context::erase</Op>
- <Op>context::inspect</Op>
- <Op>context::list</Op>
- <Op>context::load</Op>
- <Op>context::remove</Op>
- <Op>context::reset</Op>
- <Op>context::save</Op>
- <Guide>enrichment/work-with-lookup-tables</Guide>
- <Guide>enrichment/enrich-with-threat-intel</Guide>
- <Guide>enrichment/enrich-with-network-inventory</Guide>
- <Explanation>enrichment</Explanation>
